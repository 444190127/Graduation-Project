<html lang="en" class=" sizes websockets customelements history postmessage webworkers picture pointerevents webanimations webgl srcset flexbox cssanimations csscolumns csscolumns-width csscolumns-span csscolumns-fill csscolumns-gap csscolumns-rule csscolumns-rulecolor csscolumns-rulestyle csscolumns-rulewidth csscolumns-breakbefore csscolumns-breakafter csscolumns-breakinside sizes websockets customelements history postmessage webworkers picture pointerevents webanimations webgl srcset flexbox cssanimations csscolumns csscolumns-width csscolumns-span csscolumns-fill csscolumns-gap csscolumns-rule csscolumns-rulecolor csscolumns-rulestyle csscolumns-rulewidth csscolumns-breakbefore csscolumns-breakafter csscolumns-breakinside sizes websockets customelements history postmessage webworkers picture pointerevents webanimations webgl srcset flexbox cssanimations csscolumns csscolumns-width csscolumns-span csscolumns-fill csscolumns-gap csscolumns-rule csscolumns-rulecolor csscolumns-rulestyle csscolumns-rulewidth csscolumns-breakbefore csscolumns-breakafter csscolumns-breakinside"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="msapplication-TileColor" content="#0E0E0E">
  <meta name="template-color" content="#0E0E0E">
  <link rel="manifest" href="manifest.json" crossorigin="">
  <meta name="msapplication-config" content="browserconfig.xml">
  <meta name="description" content="Index page">
  <meta name="keywords" content="index, page">
  <meta name="author" content="">
  <link rel="shortcut icon" type="image/x-icon" href="assets\imgs\template\priefcase.svg">
  <link href="Aassets/css/stylee.css?version=4.1" rel="stylesheet">
  <title>Profile</title>
<style type="text/css" id="operaUserStyle"></style></head>
<body>
  <div id="preloader-active" style="display: none;">
    <div class="preloader d-flex align-items-center justify-content-center">
      <div class="preloader-inner position-relative">
        <div class="text-center"><img src="assets/imgs/template/loading.gif" alt="jobBox"></div>
      </div>
    </div>
  </div>
  <header class="header sticky-bar"> 
    <div class="container">
      <div class="main-header">
        <div class="header-left">
          <div class="header-logo"><a class="d-flex" href="index.html"><img alt="jobBox" src="assets/imgs/template/Logo.svg"></a></div><span class="btn btn-grey-small ml-10">Admin area</span>
        </div>
        <div class="header-search"> 
          <div class="box-search"> 
            <form action="jobs-grid.html" method="GET">
              <input class="form-control input-search" type="text" name="keyword" placeholder="Search">
            </form>
            </div>
        </div>
        <div class="header-menu d-none d-md-block">
          <ul> 
            <li> <a href="http://wp.alithemes.com/html/jobbox/demos/index.html">Home </a></li>
            <li style="border: 1px dashed #18191C; padding: 5px 8px; border-radius: 4px;" class="dashboard"><a href="http://localhost/jobs-grid.html">Find job</a></li>
          </ul>
        </div>
        <div class="header-right">
          <div class="block-signin">
            <div class="dropdown d-inline-block"><a class="btn btn-notify" id="dropdownNotify" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-bs-display="static"></a>
              <ul class="dropdown-menu dropdown-menu-light dropdown-menu-end" aria-labelledby="dropdownNotify">
                <li><a class="dropdown-item active" href="#">10 notifications</a></li>
                <li><a class="dropdown-item" href="#">12 messages</a></li>
                <li><a class="dropdown-item" href="#">20 replies</a></li>
              </ul>
            </div>
            <div class="member-login"><img alt="" src="assets/imgs/page/dashboard/profile.png">
              <div class="info-member"> 
                <strong id="member_name" class="color-brand-1">Steven Jobs</strong> <!-- هنا أضفنا id="member_name" -->
                <div class="dropdown">
                   <span id="member_role">Super Admin</span> <!-- هنا أضفنا id="member_role" -->
                   <ul class="dropdown-menu dropdown-menu-light dropdown-menu-end" aria-labelledby="dropdownProfile">
                    <li><a class="dropdown-item" href="profile.html">Profiles</a></li>
                    <li><a class="dropdown-item" href="my-resume.html">CV Manager</a></li>
                    <li><a class="dropdown-item" href="login.html">Logout</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <div class="burger-icon burger-icon-white"><span class="burger-icon-top"></span><span class="burger-icon-mid"></span><span class="burger-icon-bottom"></span></div>
  <div class="mobile-header-active mobile-header-wrapper-style perfect-scrollbar">
    <div class="mobile-header-wrapper-inner">
      <div class="mobile-header-content-area">
        <div class="perfect-scroll">
          <div class="mobile-search mobile-header-border mb-30">
            <form action="#">
              <input type="text" placeholder="Search…"><i class="fi-rr-search"></i>
            </form>
          </div>
          <div class="mobile-menu-wrap mobile-header-border">
            <nav>
              <ul class="main-menu">
                <li> <a class="dashboard2" href="index.html"><img src="assets/imgs/page/dashboard/dashboard.svg" alt="jobBox"><span class="name">Dashboard</span></a>
                </li>
                <li> <a class="dashboard2" href="candidates.html"><img src="assets/imgs/page/dashboard/candidates.svg" alt="jobBox"><span class="name">Candidates</span></a>
                </li>
                <li> <a class="dashboard2" href="recruiters.html"><img src="assets/imgs/page/dashboard/recruiters.svg" alt="jobBox"><span class="name">Recruiters</span></a>
                </li>
                <li> <a class="dashboard2" href="my-job-grid.html"><img src="assets/imgs/page/dashboard/jobs.svg" alt="jobBox"><span class="name">My Jobs</span></a>
                </li>
                <li> <a class="dashboard2 active" href="profile.html"><img src="assets/imgs/page/dashboard/profiles.svg" alt="jobBox"><span class="name">My Profile</span></a>
                </li>
                <li> <a class="dashboard2" href="login.html"><img src="assets/imgs/page/dashboard/logout.svg" alt="jobBox"><span class="name">Logout</span></a>
                </li>
              </ul>
            </nav>
          </div>
          <div class="mobile-account">
            <h6 class="mb-10">Your Account</h6>
            <ul class="mobile-menu font-heading">
              <li><a href="#">Profile</a></li>
              <li><a href="#">Work Preferences</a></li>
              <li><a href="#">Account Settings</a></li>
              <li><a href="#">Go Pro</a></li>
              <li><a href="page-signin.html">Sign Out</a></li>
            </ul>
            <div class="mb-15 mt-15"> <a class="btn btn-default icon-edit hover-up" href="post-job.html">Post Job</a></div>
          </div>
          <div class="site-copyright">Copyright 2022 © JobBox. <br>Designed by AliThemes.</div>
        </div>
      </div>
    </div>
  </div>
  <main class="main">
    <div class="nav"><a class="btn btn-expanded"></a>
      <nav class="nav-main-menu">
        <ul class="main-menu">
          <li> <a class="dashboard2" href="index.html"><img src="Aassets/imgs/page/dashboard/dashboard.svg" alt="jobBox"><span class="name">Dashboard</span></a>
          </li>
          
          
          
          <li> <a class="dashboard2 active" href="profile.html"><img src="Aassets/imgs/page/dashboard/profiles.svg" alt="jobBox"><span class="name">My Profile</span></a>
          </li>
          
          
          
          <li> <a class="dashboard2" href="page-signin.html"><img src="Aassets/imgs/page/dashboard/logout.svg" alt="jobBox"><span class="name">Logout</span></a>
          </li>
        </ul>
      </nav>
      <div class="border-bottom mb-20 mt-20"></div>
      
      
    </div>
    <div class="box-content">
      <div class="box-heading">
        <div class="box-title"> 
          <h3 class="mb-35">My Profile</h3>
        </div>
        <div class="box-breadcrumb"> 
          <div class="breadcrumbs">
            <ul> 
              <li> <a class="icon-home" href="index.html">Admin</a></li>
              <li><span>My Profile</span></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="row"> 
        <div class="col-xxl-9 col-xl-8 col-lg-8">
          <div class="section-box">
            <div class="container"> 
              <form id="profileForm" method="post" enctype="multipart/form-data">
                <div class="panel-white mb-30">
                <div class="box-padding">
                  <h6 class="color-text-paragraph-2">Update your profile</h6>
                  <div class="box-padding">
                    <h5>Update your CV</h5>
                    <div class="row mt-30">
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <form id="uploadForm" enctype="multipart/form-data">
                            <div class="box-upload">
                              <div class="add-file-upload">
                                <input id="cv_upload" class="fileupload" type="file" name="cv_upload" data-date="Invalid date">
                              </div>
                              <input id="cv_upload" type="file" name="file" style="display:none;">
                              <button type="button" class="btn btn-default" onclick="document.getElementById('cv_upload').click();">Upload File</button>
                            </div>
                          </form>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30 d-flex align-items-center box-file-uploaded"><span id="cv_filename">Job_required.pdf</span><a class="btn btn-delete">Delete</a></div>
                      </div>
                    </div>
                    <div class="row"> 
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30"> 
                          <label class="font-sm color-text-mutted mb-10"> FirstName *</label>
                          <input class="form-control" id="FirstName" name="FirstName" type="text" placeholder="Abdulaziz">
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <label class="font-sm color-text-mutted mb-10">LastName *</label>
                          <input class="form-control" id="LastName"name="LastName" type="Text" placeholder="Salem">
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <label class="font-sm color-text-mutted mb-10">Email *</label>
                          <input class="form-control" id="Email" name="Email" type="email" placeholder="Mcdonalds@gmail.com">
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <label class="font-sm color-text-mutted mb-10">Phone Number *</label>
                          <input class="form-control" id="PhoneNumber" name="PhoneNumber" type="Text" placeholder="01 - 234 567 89">
                        </div>
                      </div>
                      <div class="col-lg-12"> 
                        <div class="form-group mb-30"> 
                          <label class="font-sm color-text-mutted mb-10">Bio</label>
                          <textarea class="form-control" id="Bio" name="Bio" rows="5">I love Trackify...</textarea>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <label for="experience" class="font-sm color-text-mutted mb-10">Experience</label>
                          <select class="form-control" id="Experience" name="Experience" >
                            <option value="" selected="" disabled="">Choose</option>
                            <option value="1 - 2 years">1 - 2 years</option>
                            <option value="3 - 5 years">3 - 5 years</option>
                            <option value="6 - 8 years">6 - 8 years</option>
                            <option value="9 - 10 years">9 - 10 years</option>
                            <option value="10+ years">10+ years</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <label for="Speciality" class="font-sm color-text-mutted mb-10">Degree</label>
                          <select class="form-control" id="Degree" name="Degree" >
                            <option value="" selected="" disabled="">Choose the degree</option>
                            <option value="Diploma">Diploma</option>
                            <option value="Bachelor">Bachelor</option>
                            <option value="Master">Master</option>
                            <option value="PhD">PHD</option>
                          </select>
                        </div>
                      </div>
                        <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <label class="font-sm color-text-mutted mb-10">ٍSpeciality</label>
                          <input class="form-control" id="Speciality" name="Speciality" type="text" placeholder="Computer science">
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <label class="font-sm color-text-mutted mb-10">Languages </label>
                          <input class="form-control" id="Languages" name="Languages" type="text" placeholder="English, French">
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <label class="font-sm color-text-mutted mb-10">Gender</label>
                          <select class="form-control" id="Gender" name="Gender" >
                            <option value="" selected="" disabled="">Choose</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                          </select>
                           </div>
                      </div>
                      <div class="col-lg-6 col-md-6">
                        <div class="form-group mb-30">
                          <label class="font-sm color-text-mutted mb-10">Personal Website*</label>
                          <input class="form-control" id="PersonalWebsite" name="PersonalWebsite" type="text" placeholder="https://www.ksu.edu.sa">
                        </div>
                      </div>
                      <div class="col-lg-12"> 
                        <div class="form-group mt-10">
                          <button type="submit" id="saveChanges" class="btn btn-default btn-brand icon-tick">Save Changes</button>
                      </div>
                      </div>
                    </div></div>
                </div>
              </div>
            </div>
            
              <div class="panel-white mb-30">
                
              </div>
            </div>
          </div>
        </div>
        <div class="col-xxl-3 col-xl-4 col-lg-4">
          
          
        </div>
      </div>
      <div class="mt-10"> 
        <div class="section-box">
          <div class="container"> 
            
          </div>
        </div>
      </div>
      <footer class="footer mt-20">
        <div class="container">
         
        </div>
      </footer>
    </div>
  </main>
  <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
  <script src="assets/js/vendor/jquery-3.6.0.min.js"></script>
  <script src="assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
  <script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
  <script src="assets/js/plugins/waypoints.js"></script>
  <script src="assets/js/plugins/magnific-popup.js"></script>
  <script src="assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="assets/js/plugins/select2.min.js"></script>
  <script src="assets/js/plugins/swiper-bundle.min.js"></script>
  <script src="assets/js/plugins/jquery.circliful.js"></script>
  <script src="assets/js/main.js?v=4.1"></script>
  <script>
$(document).ready(function() {
    // Update the file name in UI when a file is chosen
    $(document).on('change', '#cv_upload', function() {
        var fileName = $(this).val().split('\\').pop();
        $('#cv_filename').text(fileName);
    });

    // Get user profile on page load
    $.ajax({
        url: 'profile.php',
        type: 'GET',
        dataType: 'json',
        success: function(response) {
            if (response.user) {
                $('#FirstName').val(response.user.FirstName);
                $('#LastName').val(response.user.LastName);
                $('#Email').val(response.user.Email);
                $('#PhoneNumber').val(response.user.PhoneNumber);
                $('#Bio').val(response.user.Bio || '');
                $('#PersonalWebsite').val(response.user.PersonalWebsite);
                $('#Experience').val(response.user.Experience);
                $('#Languages').val(response.user.Languages);
                $('#Degree').val(response.user.Degree);
                $('#Speciality').val(response.user.Speciality);
                $('#Gender').val(response.user.Gender);
                $('#member_name').text(response.user.FirstName + ' ' + response.user.LastName);
                $('#member_role').text(response.user.Role || 'Applicant');
                if (response.user.CV && response.user.CV !== 'null') {
                    $('#cv_filename').text(response.user.CV);
                }
            }
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.error('Error fetching data: ', textStatus, errorThrown);
        }
    });

    // Handle CV upload
    $('#uploadForm').on('submit', function(e) {
        e.preventDefault();
        var formData = new FormData(this);
        $.ajax({
            url: 'profile.php',
            type: 'POST',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.cvSuccess) {
                    $('#cv_filename').text(response.cvFilename);
                    alert('CV uploaded successfully.');
                } else {
                    alert('Failed to upload CV.');
                }
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.error('Error uploading CV: ', textStatus, errorThrown);
            }
        });
    });

    // Handle CV deletion
    $('.btn-delete').on('click', function() {
        var cvToDelete = $('#cv_filename').text();
        $.ajax({
            url: 'profile.php',
            type: 'POST',
            data: { action: 'delete_cv', cv: cvToDelete },
            success: function(response) {
                if (response.success) {
                    $('#cv_filename').text('');
                } else {
                    alert('Failed to delete CV.');
                }
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.error('Error deleting CV: ', textStatus, errorThrown);
            }
        });
    });

    // Handle profile update on form submission
    $('#profileForm').on('submit', function(e) {
        e.preventDefault();
        var formData = new FormData(this);
        $.ajax({
            url: 'profile.php',
            type: 'POST',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.success) {
                    alert('Profile updated successfully.');
                } else {
                    alert(response.message);
                }
            },
            error: function(jqXHR, textStatus, errorThrown) {
                alert('Failed to update profile. Please try again.');
                console.error('Error:', textStatus, errorThrown);
            }
        });
    });
});

</script>

</body></html>